<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íˆ¬ìì ì •ì‚° ë¦¬í¬íŠ¸</title>
    <!-- SUPER SERVICE WORKER BLOCKER (100% ì™„ì „ ì°¨ë‹¨) -->
    <script src="js/super-block-sw.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body { 
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
        }
        
        @media print {
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            
            body { 
                background: white !important;
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
            }
            
            .bg-gradient-to-r {
                background: linear-gradient(to right, #3b82f6, #1e40af) !important;
                -webkit-print-color-adjust: exact;
            }
            
            .shadow-lg {
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1) !important;
            }
            
            .page-break {
                page-break-after: always;
            }
            
            @page {
                margin: 1in;
                size: A4;
            }
        }
        
        .report-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .signature-text {
            font-family: 'Dancing Script', 'Brush Script MT', cursive;
            font-size: 28px;
            font-weight: 400;
            color: #1f2937;
            font-style: italic;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }
        
        .kpi-card {
            border-left: 4px solid;
            transition: all 0.2s ease-in-out;
        }
        
        .kpi-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .profit-positive {
            border-left-color: #10b981;
            background-color: #d1fae5;
        }
        
        .profit-negative {
            border-left-color: #ef4444;
            background-color: #fee2e2;
        }
        
        .profit-neutral {
            border-left-color: #6b7280;
            background-color: #f3f4f6;
        }
        
        .summary-table {
            border-collapse: collapse;
        }
        
        .summary-table th,
        .summary-table td {
            border: 1px solid #e5e7eb;
            padding: 12px;
            text-align: right;
        }
        
        .summary-table th {
            background-color: #f9fafb;
            font-weight: 600;
        }
        
        .company-logo {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #3b82f6, #1e40af);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
        }
        
        .professional-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
            overflow: hidden;
        }
        
        .professional-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 40%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(15deg);
        }
        
        .data-highlight {
            position: relative;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(147, 51, 234, 0.1));
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        
        .performance-badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .performance-excellent {
            background-color: #d1fae5;
            color: #065f46;
        }
        
        .performance-good {
            background-color: #dbeafe;
            color: #1e40af;
        }
        
        .performance-average {
            background-color: #fef3c7;
            color: #92400e;
        }
        
        .performance-poor {
            background-color: #fee2e2;
            color: #991b1b;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- ì¸ì‡„ìš© ì»¨íŠ¸ë¡¤ ë²„íŠ¼ -->
    <div class="no-print fixed top-4 right-4 z-50 space-x-2">
        <button onclick="window.print()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg shadow-lg transition-colors">
            <i class="fas fa-print mr-2"></i>
            ì¸ì‡„í•˜ê¸°
        </button>
        <button onclick="window.history.back()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg shadow-lg transition-colors">
            <i class="fas fa-arrow-left mr-2"></i>
            ëŒì•„ê°€ê¸°
        </button>
    </div>

    <div class="max-w-5xl mx-auto p-8">
        <!-- ë¦¬í¬íŠ¸ í—¤ë” -->
        <div class="professional-header text-white rounded-lg shadow-lg p-8 mb-8 relative">
            <div class="flex items-center justify-between relative z-10">
                <div class="flex items-center">
                    <div class="company-logo mr-6">
                        <i class="fas fa-building"></i>
                    </div>
                    <div>
                        <h1 class="text-3xl font-bold mb-2">Teamk íˆ¬ìì ì •ì‚° ë¦¬í¬íŠ¸</h1>
                        <p class="text-blue-100">Thailand Airbnb Investment Management System</p>
                        <div class="mt-3 inline-flex items-center">
                            <i class="fas fa-shield-alt mr-2"></i>
                            <span class="text-sm">ê³µì¸ íˆ¬ìì ë¦¬í¬íŠ¸</span>
                        </div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="text-sm text-blue-100 mb-1">ë¦¬í¬íŠ¸ ìƒì„±ì¼</div>
                    <div id="reportDate" class="text-xl font-semibold mb-3"></div>
                    <div class="performance-badge bg-white bg-opacity-20 text-white">
                        <i class="fas fa-star mr-1"></i>
                        ê³µì‹ ë¦¬í¬íŠ¸
                    </div>
                </div>
            </div>
        </div>

        <!-- íˆ¬ìì ì •ë³´ -->
        <div class="data-highlight rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                <i class="fas fa-user text-blue-600 mr-2"></i>
                íˆ¬ìì ì •ë³´
                <span class="performance-badge performance-good ml-3">
                    <i class="fas fa-verify mr-1"></i>
                    ì¸ì¦ íˆ¬ìì
                </span>
            </h2>
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <div class="mb-3">
                        <span class="text-gray-600 font-medium">íˆ¬ììëª…:</span>
                        <span id="investorName" class="ml-2 font-semibold text-gray-800"></span>
                    </div>
                    <div class="mb-3">
                        <span class="text-gray-600 font-medium">ì •ì‚° ì›”:</span>
                        <span id="settlementPeriod" class="ml-2 font-semibold text-gray-800"></span>
                    </div>
                    <div class="mb-3">
                        <span class="text-gray-600 font-medium">ë³´ìœ  ìˆ™ì†Œ ìˆ˜:</span>
                        <span id="accommodationCount" class="ml-2 font-semibold text-blue-600"></span>
                    </div>
                </div>
                <div>
                    <div class="mb-3">
                        <span class="text-gray-600 font-medium">íˆ¬ì ì§€ë¶„:</span>
                        <span id="ownershipPercentage" class="ml-2 font-semibold text-gray-800"></span>
                    </div>
                    <div class="mb-3">
                        <span class="text-gray-600 font-medium">ì´ íˆ¬ìì•¡:</span>
                        <span id="totalInvestment" class="ml-2 font-semibold text-green-600"></span>
                    </div>
                    <div class="mb-3">
                        <span class="text-gray-600 font-medium">ì—°ë½ì²˜:</span>
                        <span id="contactInfo" class="ml-2 font-semibold text-gray-800"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- KPI ì¹´ë“œë“¤ -->
        <div class="grid md:grid-cols-4 gap-6 mb-8">
            <div class="kpi-card profit-positive bg-white rounded-lg shadow p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-sm font-medium text-gray-600 mb-1">ì´ ìˆ˜ìµ</h3>
                        <div id="totalRevenue" class="text-2xl font-bold text-green-600">â‚©0</div>
                    </div>
                    <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-won-sign text-green-600 text-xl"></i>
                    </div>
                </div>
            </div>
            
            <div class="kpi-card profit-negative bg-white rounded-lg shadow p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-sm font-medium text-gray-600 mb-1">ì´ ë¹„ìš©</h3>
                        <div id="totalExpenses" class="text-2xl font-bold text-red-600">â‚©0</div>
                    </div>
                    <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-receipt text-red-600 text-xl"></i>
                    </div>
                </div>
            </div>
            
            <div class="kpi-card profit-positive bg-white rounded-lg shadow p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-sm font-medium text-gray-600 mb-1">ìˆœ ì´ìµ</h3>
                        <div id="netProfit" class="text-2xl font-bold text-blue-600">â‚©0</div>
                    </div>
                    <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-chart-line text-blue-600 text-xl"></i>
                    </div>
                </div>
            </div>
            
            <div class="kpi-card profit-neutral bg-white rounded-lg shadow p-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-sm font-medium text-gray-600 mb-1">íˆ¬ìì ë°°ë‹¹</h3>
                        <div id="investorDividend" class="text-2xl font-bold text-purple-600">â‚©0</div>
                    </div>
                    <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-hand-holding-usd text-purple-600 text-xl"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- ìˆ˜ìµ ì°¨íŠ¸ -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                <i class="fas fa-chart-bar text-blue-600 mr-2"></i>
                ì›”ë³„ ìˆ˜ìµ ì¶”ì´
            </h2>
            <div class="chart-container">
                <canvas id="revenueChart"></canvas>
            </div>
        </div>

        <!-- ìˆ™ì†Œë³„ ì„±ê³¼ -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                <i class="fas fa-home text-blue-600 mr-2"></i>
                ìˆ™ì†Œë³„ ìˆ˜ìµ ì„±ê³¼
            </h2>
            <div class="overflow-x-auto">
                <table class="summary-table w-full">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="text-left">ìˆ™ì†Œëª…</th>
                            <th>ì´ ìˆ˜ìµ</th>
                            <th>ì´ ë¹„ìš©</th>
                            <th>ìˆœ ì´ìµ</th>
                            <th>ìˆ˜ìµë¥ </th>
                            <th>íˆ¬ìì ë°°ë‹¹</th>
                        </tr>
                    </thead>
                    <tbody id="accommodationPerformanceTable">
                        <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- ìˆ˜ìµ ë¶„ì„ -->
        <div class="grid md:grid-cols-2 gap-8 mb-8">
            <!-- ìˆ˜ìµ êµ¬ì¡° íŒŒì´ì°¨íŠ¸ -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-lg font-bold text-gray-800 mb-4 border-b pb-2">
                    <i class="fas fa-chart-pie text-blue-600 mr-2"></i>
                    ìˆ˜ìµ êµ¬ì¡° ë¶„ì„
                </h3>
                <div class="chart-container">
                    <canvas id="revenueStructureChart"></canvas>
                </div>
            </div>
            
            <!-- ë¹„ìš© êµ¬ì¡° íŒŒì´ì°¨íŠ¸ -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-lg font-bold text-gray-800 mb-4 border-b pb-2">
                    <i class="fas fa-chart-pie text-red-600 mr-2"></i>
                    ë¹„ìš© êµ¬ì¡° ë¶„ì„
                </h3>
                <div class="chart-container">
                    <canvas id="expenseStructureChart"></canvas>
                </div>
            </div>
        </div>

        <!-- ìƒì„¸ ê±°ë˜ ë‚´ì—­ -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                <i class="fas fa-list-alt text-blue-600 mr-2"></i>
                ìƒì„¸ ê±°ë˜ ë‚´ì—­
            </h2>
            <div class="overflow-x-auto">
                <table class="summary-table w-full">
                    <thead>
                        <tr class="bg-gray-50">
                            <th class="text-left">ë‚ ì§œ</th>
                            <th class="text-left">ìˆ™ì†Œ</th>
                            <th class="text-left">êµ¬ë¶„</th>
                            <th class="text-left">í•­ëª©</th>
                            <th>ê¸ˆì•¡</th>
                            <th class="text-left">ë¹„ê³ </th>
                        </tr>
                    </thead>
                    <tbody id="transactionDetailsTable">
                        <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- íˆ¬ì ì„±ê³¼ ë¶„ì„ -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                <i class="fas fa-chart-line text-blue-600 mr-2"></i>
                íˆ¬ì ì„±ê³¼ ë¶„ì„
            </h2>
            <div class="grid md:grid-cols-3 gap-6 mb-6">
                <div class="text-center">
                    <div class="text-3xl font-bold text-blue-600 mb-2" id="annualizedReturn">0.0%</div>
                    <div class="text-sm text-gray-600">ì—°í™˜ì‚° ìˆ˜ìµë¥ </div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-green-600 mb-2" id="monthlyReturn">0.0%</div>
                    <div class="text-sm text-gray-600">ì›” ìˆ˜ìµë¥ </div>
                </div>
                <div class="text-center">
                    <div class="text-3xl font-bold text-purple-600 mb-2" id="paybackPeriod">0ê°œì›”</div>
                    <div class="text-sm text-gray-600">íˆ¬ìíšŒìˆ˜ ì˜ˆìƒê¸°ê°„</div>
                </div>
            </div>
        </div>

        <!-- ë¦¬í¬íŠ¸ ìš”ì•½ ë° ì„œëª… -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2">
                <i class="fas fa-clipboard-check text-blue-600 mr-2"></i>
                ì •ì‚° ìš”ì•½ ë° íˆ¬ì ì œì–¸
            </h2>
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="font-semibold text-gray-700 mb-3">ì´ë²ˆ ë‹¬ í•˜ì´ë¼ì´íŠ¸</h3>
                    <ul id="highlights" class="space-y-2 text-gray-600">
                        <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-700 mb-3">íˆ¬ì ì œì–¸ ë° ì „ë§</h3>
                    <div id="nextMonthOutlook" class="text-gray-600">
                        <!-- ë™ì ìœ¼ë¡œ ì±„ì›Œì§ -->
                    </div>
                </div>
            </div>
            
            <!-- ì„œëª… ë° ìŠ¹ì¸ -->
            <div class="mt-8 pt-6 border-t border-gray-200">
                <div class="grid md:grid-cols-2 gap-8 text-center">
                    <div>
                        <div class="h-20 mb-2 flex items-center justify-center">
                            <div class="signature-text">Yesol, Jang</div>
                        </div>
                        <div class="text-sm text-gray-600">ê´€ë¦¬ì ì„œëª…</div>
                        <div class="text-xs text-gray-500 mt-1">Teamk Holding ëŒ€í‘œì´ì‚¬</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-600 mb-2">ìŠ¹ì¸ ì¼ì</div>
                        <div class="border border-gray-400 p-2 h-12 flex items-center justify-center">
                            <span id="approvalDate" class="text-gray-800 font-semibold"></span>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">ê³µì‹ ìŠ¹ì¸</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- í‘¸í„° -->
        <div class="text-center text-gray-500 text-sm border-t pt-6">
            <p>Â© 2024 Teamk Thailand Airbnb Investment Management System</p>
            <p class="mt-2">ë³¸ ë¦¬í¬íŠ¸ëŠ” íˆ¬ìì ì •ì‚°ì„ ëª©ì ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìœ¼ë©°, ì •í™•í•œ ì •ë³´ ì œê³µì„ ìœ„í•´ ìµœì„ ì„ ë‹¤í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
            <p class="mt-1">ë¬¸ì˜ì‚¬í•­: contact@teamk.com | Tel: +82-xx-xxxx-xxxx</p>
        </div>
    </div>

    <script>
        // URL íŒŒë¼ë¯¸í„°ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        const urlParams = new URLSearchParams(window.location.search);
        const investorId = urlParams.get('investor');
        const month = urlParams.get('month');
        
        console.log('ğŸŒ URL íŒŒë¼ë¯¸í„°:', {
            investorId: investorId,
            month: month,
            fullUrl: window.location.href
        });
        
        let investorData = null;
        let settlementData = null;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            // í…ŒìŠ¤íŠ¸ ë°ì´í„° ìë™ ìƒì„± ì œê±°ë¨ - ì‹¤ì œ ë°ì´í„°ë§Œ ì‚¬ìš©
            
            initializeReport();
        });



        async function initializeReport() {
            try {
                // í˜„ì¬ ë‚ ì§œ ì„¤ì • (ì‹¤ì‹œê°„)
                const today = new Date();
                const reportDateString = today.toLocaleDateString('ko-KR', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                });
                document.getElementById('reportDate').textContent = reportDateString;
                document.getElementById('approvalDate').textContent = reportDateString;

                // íˆ¬ìì ë° ì •ì‚° ë°ì´í„° ë¡œë“œ
                await loadInvestorData();
                await loadSettlementData();
                
                // ë¦¬í¬íŠ¸ ìƒì„±
                generateReport();
                
            } catch (error) {
                console.error('ë¦¬í¬íŠ¸ ì´ˆê¸°í™” ì˜¤ë¥˜:', error);
                alert('ë¦¬í¬íŠ¸ ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        async function loadInvestorData() {
            console.log('ğŸ” íˆ¬ìì ë°ì´í„° ë¡œë”© ì‹œì‘...');
            console.log('ğŸ“ URL íŒŒë¼ë¯¸í„° - investorId:', investorId);
            
            const investors = JSON.parse(localStorage.getItem('investorData') || '[]');
            console.log('ğŸ“‹ localStorageì˜ íˆ¬ìì ë°ì´í„°:', investors);
            
            // ë‹¤ì–‘í•œ ë°©ë²•ìœ¼ë¡œ íˆ¬ìì ì°¾ê¸°
            investorData = investors.find(inv => {
                console.log('ğŸ” ë¹„êµ:', inv.id, inv.name, inv.userId);
                return inv.id === investorId || 
                       inv.name === investorId || 
                       inv.userId === investorId ||
                       inv.id === decodeURIComponent(investorId) ||
                       inv.name === decodeURIComponent(investorId);
            });
            
            console.log('âœ… ì°¾ì€ íˆ¬ìì:', investorData);
            
            if (!investorData) {
                console.error('âŒ íˆ¬ììë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                console.log('ğŸ” ì‚¬ìš© ê°€ëŠ¥í•œ íˆ¬ìì IDë“¤:', investors.map(inv => ({id: inv.id, name: inv.name, userId: inv.userId})));
                
                // ì²« ë²ˆì§¸ íˆ¬ììë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ê±°ë‚˜ ìƒ˜í”Œ íˆ¬ìì ìƒì„±
                if (investors.length > 0) {
                    investorData = investors[0];
                    console.log('âš ï¸ ì²« ë²ˆì§¸ íˆ¬ììë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš©:', investorData.name);
                } else {
                    console.log('âš ï¸ íˆ¬ìì ë°ì´í„°ê°€ ì—†ì–´ ìƒ˜í”Œ íˆ¬ììë¥¼ ìƒì„±í•©ë‹ˆë‹¤.');
                    investorData = {
                        id: 'demo-investor',
                        name: 'ë°ëª¨ íˆ¬ìì',
                        initialInvestment: 50000000,
                        ownershipPercentage: 100,
                        contact: 'demo@teamk.com',
                        accommodations: ['sample-acc-1', 'sample-acc-2']
                    };
                }
            }
            
            // íˆ¬ìì ì •ë³´ í‘œì‹œ
            document.getElementById('investorName').textContent = investorData.name || 'íˆ¬ìì';
            document.getElementById('settlementPeriod').textContent = month ? `${month.replace('-', 'ë…„ ')}ì›”` : 'ì „ì²´';
            document.getElementById('accommodationCount').textContent = (investorData.accommodations || []).length + 'ê°œ';
            document.getElementById('ownershipPercentage').textContent = (investorData.ownershipPercentage || investorData.share || 100) + '%';
            document.getElementById('totalInvestment').textContent = formatMoney(investorData.initialInvestment || investorData.investment || 50000000);
            document.getElementById('contactInfo').textContent = investorData.contact || investorData.phone || investorData.email || '-';
        }

        async function loadSettlementData() {
            console.log('ğŸ“Š ì •ì‚° ë°ì´í„° ë¡œë”© ì‹œì‘...');
            console.log('ğŸ“ URLì—ì„œ ì „ë‹¬ëœ month íŒŒë¼ë¯¸í„°:', month);
            
            // localStorageì—ì„œ íšŒê³„ ë°ì´í„° ë¡œë“œ (ì•ˆì „ ê²€ì‚¬ í¬í•¨)
            let accountingData = [];
            let accommodationData = [];
            
            try {
                accountingData = JSON.parse(localStorage.getItem('accountingData') || '[]');
                if (!Array.isArray(accountingData)) {
                    console.warn('âš ï¸ íšŒê³„ ë°ì´í„°ê°€ ë°°ì—´ì´ ì•„ë‹˜, ë¹ˆ ë°°ì—´ë¡œ ì´ˆê¸°í™”');
                    accountingData = [];
                }
            } catch (e) {
                console.error('âŒ íšŒê³„ ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜:', e);
                accountingData = [];
            }
            
            try {
                accommodationData = JSON.parse(localStorage.getItem('accommodationData') || '[]');
                if (!Array.isArray(accommodationData)) {
                    console.warn('âš ï¸ ìˆ™ì†Œ ë°ì´í„°ê°€ ë°°ì—´ì´ ì•„ë‹˜, ë¹ˆ ë°°ì—´ë¡œ ì´ˆê¸°í™”');
                    accommodationData = [];
                }
            } catch (e) {
                console.error('âŒ ìˆ™ì†Œ ë°ì´í„° íŒŒì‹± ì˜¤ë¥˜:', e);
                accommodationData = [];
            }
            
            console.log('ğŸ“‹ íšŒê³„ ë°ì´í„° ì´', accountingData.length, 'ê±´');
            console.log('ğŸ  ìˆ™ì†Œ ë°ì´í„° ì´', accommodationData.length, 'ê°œ');
            
            // íˆ¬ììì˜ ìˆ™ì†Œë§Œ í•„í„°ë§
            const investorAccommodations = investorData.accommodations || [];
            console.log('ğŸ  íˆ¬ìì ë³´ìœ  ìˆ™ì†Œ ID:', investorAccommodations);
            
            // í•´ë‹¹ ì›”ì˜ ë°ì´í„°ë§Œ í•„í„°ë§ (ì›”ì´ ì„ íƒëœ ê²½ìš°)
            const filteredTransactions = accountingData.filter(item => {
                const isInvestorAccommodation = investorAccommodations.length === 0 || investorAccommodations.includes(item.accommodationId);
                
                // date í•„ë“œ ì•ˆì „ ê²€ì‚¬
                let isCorrectMonth = true;
                if (month && item.date && typeof item.date === 'string') {
                    isCorrectMonth = item.date.startsWith(month);
                } else if (month && !item.date) {
                    console.warn('âš ï¸ ë‚ ì§œê°€ ì—†ëŠ” ê±°ë˜ ë°ì´í„°:', item);
                    isCorrectMonth = false;
                }
                
                return isInvestorAccommodation && isCorrectMonth;
            });
            
            const filteredAccommodations = accommodationData.filter(acc => 
                investorAccommodations.length === 0 || investorAccommodations.includes(acc.id)
            );
            
            settlementData = {
                transactions: filteredTransactions,
                accommodations: filteredAccommodations
            };
            
            console.log('âœ… í•„í„°ë§ëœ ê±°ë˜:', settlementData.transactions.length, 'ê±´');
            console.log('âœ… í•„í„°ë§ëœ ìˆ™ì†Œ:', settlementData.accommodations.length, 'ê°œ');
            
            // ë°ì´í„°ê°€ ì—†ëŠ” ê²½ìš° ìƒ˜í”Œ ë°ì´í„° ìƒì„± (ë°ëª¨ìš©)
            if (settlementData.transactions.length === 0) {
                console.log('âš ï¸ ê±°ë˜ ë°ì´í„°ê°€ ì—†ì–´ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.');
                settlementData.transactions = generateSampleTransactions();
            }
            
            if (settlementData.accommodations.length === 0) {
                console.log('âš ï¸ ìˆ™ì†Œ ë°ì´í„°ê°€ ì—†ì–´ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.');
                settlementData.accommodations = generateSampleAccommodations();
            }
        }

        function generateSampleTransactions() {
            // monthê°€ ì—†ê±°ë‚˜ ì˜ëª»ëœ í˜•ì‹ì¼ ê²½ìš° í˜„ì¬ ì›” ì‚¬ìš©
            let targetMonth = month;
            if (!targetMonth || typeof targetMonth !== 'string' || !targetMonth.match(/^\d{4}-\d{2}$/)) {
                targetMonth = new Date().toISOString().substring(0, 7);
                console.log('âš ï¸ ì˜ëª»ëœ ì›” íŒŒë¼ë¯¸í„°, í˜„ì¬ ì›” ì‚¬ìš©:', targetMonth);
            }
            
            return [
                {
                    id: 'sample1',
                    date: targetMonth + '-15',
                    accommodationId: 'sample-acc-1',
                    type: 'income',
                    category: 'ìˆ™ë°•ë£Œ',
                    amount: 1200000,
                    description: 'ì—ì–´ë¹„ì•¤ë¹„ ì˜ˆì•½ ìˆ˜ìµ'
                },
                {
                    id: 'sample2',
                    date: targetMonth + '-20',
                    accommodationId: 'sample-acc-1',
                    type: 'expense',
                    category: 'ì²­ì†Œë¹„',
                    amount: 150000,
                    description: 'ì •ê¸° ì²­ì†Œ ë¹„ìš©'
                },
                {
                    id: 'sample3',
                    date: targetMonth + '-25',
                    accommodationId: 'sample-acc-2',
                    type: 'income',
                    category: 'ìˆ™ë°•ë£Œ',
                    amount: 950000,
                    description: 'ë¶€í‚¹ë‹·ì»´ ì˜ˆì•½ ìˆ˜ìµ'
                }
            ];
        }

        function generateSampleAccommodations() {
            return [
                {
                    id: 'sample-acc-1',
                    name: 'ë°©ì½• ì‹œí‹° ì•„íŒŒíŠ¸',
                    location: 'ë°©ì½• ì‹œë‚´'
                },
                {
                    id: 'sample-acc-2',
                    name: 'íŒŒíƒ€ì•¼ ë¹„ì¹˜ ì½˜ë„',
                    location: 'íŒŒíƒ€ì•¼ í•´ë³€ê°€'
                }
            ];
        }

        function generateReport() {
            // KPI ê³„ì‚° ë° í‘œì‹œ
            calculateKPIs();
            
            // ì°¨íŠ¸ ìƒì„±
            createRevenueChart();
            createRevenueStructureChart();
            createExpenseStructureChart();
            
            // í…Œì´ë¸” ìƒì„±
            generateAccommodationPerformanceTable();
            generateTransactionDetailsTable();
            
            // í•˜ì´ë¼ì´íŠ¸ ìƒì„±
            generateHighlights();
            
            // íˆ¬ì ì„±ê³¼ ë¶„ì„
            calculateInvestmentPerformance();
        }

        function calculateKPIs() {
            const transactions = settlementData.transactions;
            
            let totalRevenue = 0;
            let totalExpenses = 0;
            
            transactions.forEach(transaction => {
                if (transaction.type === 'income') {
                    totalRevenue += parseFloat(transaction.amount || 0);
                } else if (transaction.type === 'expense') {
                    totalExpenses += parseFloat(transaction.amount || 0);
                }
            });
            
            const netProfit = totalRevenue - totalExpenses;
            const investorShare = (investorData.ownershipPercentage || 100) / 100;
            const investorDividend = netProfit * investorShare;
            
            // KPI í‘œì‹œ
            document.getElementById('totalRevenue').textContent = formatMoney(totalRevenue);
            document.getElementById('totalExpenses').textContent = formatMoney(totalExpenses);
            document.getElementById('netProfit').textContent = formatMoney(netProfit);
            document.getElementById('investorDividend').textContent = formatMoney(investorDividend);
            
            // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
            updateKPIColors(netProfit);
        }

        function updateKPIColors(netProfit) {
            const netProfitElement = document.getElementById('netProfit');
            const dividendElement = document.getElementById('investorDividend');
            
            if (netProfit > 0) {
                netProfitElement.className = 'text-2xl font-bold text-green-600';
                dividendElement.className = 'text-2xl font-bold text-green-600';
            } else if (netProfit < 0) {
                netProfitElement.className = 'text-2xl font-bold text-red-600';
                dividendElement.className = 'text-2xl font-bold text-red-600';
            } else {
                netProfitElement.className = 'text-2xl font-bold text-gray-600';
                dividendElement.className = 'text-2xl font-bold text-gray-600';
            }
        }

        function createRevenueChart() {
            const ctx = document.getElementById('revenueChart').getContext('2d');
            
            // ì›”ë³„ ë°ì´í„° ì§‘ê³„
            const monthlyData = {};
            settlementData.transactions.forEach(transaction => {
                const monthKey = transaction.date.substring(0, 7); // YYYY-MM
                if (!monthlyData[monthKey]) {
                    monthlyData[monthKey] = { revenue: 0, expenses: 0 };
                }
                
                if (transaction.type === 'income') {
                    monthlyData[monthKey].revenue += parseFloat(transaction.amount || 0);
                } else if (transaction.type === 'expense') {
                    monthlyData[monthKey].expenses += parseFloat(transaction.amount || 0);
                }
            });
            
            const labels = Object.keys(monthlyData).sort().map(month => {
                return month.replace('-', 'ë…„ ') + 'ì›”';
            });
            const revenueData = Object.keys(monthlyData).sort().map(month => monthlyData[month].revenue);
            const expenseData = Object.keys(monthlyData).sort().map(month => monthlyData[month].expenses);
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'ìˆ˜ìµ',
                        data: revenueData,
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'ë¹„ìš©',
                        data: expenseData,
                        borderColor: '#ef4444',
                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return formatMoney(value);
                                }
                            }
                        }
                    }
                }
            });
        }

        function createRevenueStructureChart() {
            const ctx = document.getElementById('revenueStructureChart').getContext('2d');
            
            // ìˆ˜ìµ êµ¬ì¡° ë°ì´í„° ì§‘ê³„
            const revenueStructure = {};
            settlementData.transactions
                .filter(t => t.type === 'income')
                .forEach(transaction => {
                    const category = transaction.category || 'ê¸°íƒ€';
                    revenueStructure[category] = (revenueStructure[category] || 0) + parseFloat(transaction.amount || 0);
                });
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(revenueStructure),
                    datasets: [{
                        data: Object.values(revenueStructure),
                        backgroundColor: [
                            '#10b981', '#3b82f6', '#8b5cf6', 
                            '#f59e0b', '#ef4444', '#6b7280'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function createExpenseStructureChart() {
            const ctx = document.getElementById('expenseStructureChart').getContext('2d');
            
            // ë¹„ìš© êµ¬ì¡° ë°ì´í„° ì§‘ê³„
            const expenseStructure = {};
            settlementData.transactions
                .filter(t => t.type === 'expense')
                .forEach(transaction => {
                    const category = transaction.category || 'ê¸°íƒ€';
                    expenseStructure[category] = (expenseStructure[category] || 0) + parseFloat(transaction.amount || 0);
                });
            
            new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: Object.keys(expenseStructure),
                    datasets: [{
                        data: Object.values(expenseStructure),
                        backgroundColor: [
                            '#ef4444', '#f59e0b', '#8b5cf6', 
                            '#6b7280', '#10b981', '#3b82f6'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function generateAccommodationPerformanceTable() {
            const tableBody = document.getElementById('accommodationPerformanceTable');
            
            settlementData.accommodations.forEach(accommodation => {
                const accTransactions = settlementData.transactions.filter(t => t.accommodationId === accommodation.id);
                
                let revenue = 0;
                let expenses = 0;
                
                accTransactions.forEach(transaction => {
                    if (transaction.type === 'income') {
                        revenue += parseFloat(transaction.amount || 0);
                    } else if (transaction.type === 'expense') {
                        expenses += parseFloat(transaction.amount || 0);
                    }
                });
                
                const netProfit = revenue - expenses;
                const profitMargin = revenue > 0 ? ((netProfit / revenue) * 100).toFixed(1) : '0.0';
                const investorShare = (investorData.ownershipPercentage || 100) / 100;
                const investorDividend = netProfit * investorShare;
                
                // ì„±ê³¼ ë°°ì§€ ìƒì„±
                let performanceBadge = '';
                if (parseFloat(profitMargin) > 20) {
                    performanceBadge = '<span class="performance-badge performance-excellent">ìš°ìˆ˜</span>';
                } else if (parseFloat(profitMargin) > 10) {
                    performanceBadge = '<span class="performance-badge performance-good">ì–‘í˜¸</span>';
                } else if (parseFloat(profitMargin) > 0) {
                    performanceBadge = '<span class="performance-badge performance-average">ë³´í†µ</span>';
                } else {
                    performanceBadge = '<span class="performance-badge performance-poor">ì£¼ì˜</span>';
                }

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="text-left font-medium">${accommodation.name} ${performanceBadge}</td>
                    <td class="text-green-600 font-semibold">${formatMoney(revenue)}</td>
                    <td class="text-red-600 font-semibold">${formatMoney(expenses)}</td>
                    <td class="font-semibold ${netProfit >= 0 ? 'text-blue-600' : 'text-red-600'}">${formatMoney(netProfit)}</td>
                    <td class="font-semibold">${profitMargin}%</td>
                    <td class="text-purple-600 font-semibold">${formatMoney(investorDividend)}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        function generateTransactionDetailsTable() {
            const tableBody = document.getElementById('transactionDetailsTable');
            
            // ë‚ ì§œìˆœ ì •ë ¬
            const sortedTransactions = [...settlementData.transactions].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedTransactions.forEach(transaction => {
                const accommodation = settlementData.accommodations.find(acc => acc.id === transaction.accommodationId);
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td class="text-left">${formatDate(transaction.date)}</td>
                    <td class="text-left">${accommodation ? accommodation.name : '-'}</td>
                    <td class="text-left">
                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full ${
                            transaction.type === 'income' 
                                ? 'bg-green-100 text-green-800' 
                                : 'bg-red-100 text-red-800'
                        }">
                            ${transaction.type === 'income' ? 'ìˆ˜ìµ' : 'ë¹„ìš©'}
                        </span>
                    </td>
                    <td class="text-left">${transaction.category || '-'}</td>
                    <td class="font-semibold ${transaction.type === 'income' ? 'text-green-600' : 'text-red-600'}">
                        ${transaction.type === 'income' ? '+' : '-'}${formatMoney(Math.abs(parseFloat(transaction.amount || 0)))}
                    </td>
                    <td class="text-left text-sm text-gray-600">${transaction.description || '-'}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        function generateHighlights() {
            const highlightsList = document.getElementById('highlights');
            const outlookDiv = document.getElementById('nextMonthOutlook');
            
            // í•˜ì´ë¼ì´íŠ¸ ìƒì„±
            const highlights = [
                `ì´ ${settlementData.accommodations.length}ê°œ ìˆ™ì†Œì—ì„œ ìˆ˜ìµ ì°½ì¶œ`,
                `ì´ë²ˆ ë‹¬ ì´ ê±°ë˜ ê±´ìˆ˜: ${settlementData.transactions.length}ê±´`,
                `í‰ê·  ìˆ™ì†Œë‹¹ ìˆ˜ìµë¥ : ${calculateAverageMargin()}%`,
                `ìµœê³  ìˆ˜ìµ ìˆ™ì†Œ: ${getBestPerformingAccommodation()}`
            ];
            
            highlights.forEach(highlight => {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fas fa-check-circle text-green-500 mr-2"></i>${highlight}`;
                highlightsList.appendChild(li);
            });
            
            // íˆ¬ì ì œì–¸ ë° ì „ë§
            const averageMargin = parseFloat(calculateAverageMargin());
            let outlook = '';
            
            if (averageMargin > 15) {
                outlook = `
                    <div class="performance-badge performance-excellent mb-3">
                        <i class="fas fa-trophy mr-1"></i>
                        ìš°ìˆ˜í•œ íˆ¬ì ì„±ê³¼
                    </div>
                    <p class="mb-2">â€¢ <strong>í¬íŠ¸í´ë¦¬ì˜¤ í™•ì¥ ê¶Œì¥:</strong> í˜„ì¬ ìš°ìˆ˜í•œ ìˆ˜ìµë¥ ì„ ë°”íƒ•ìœ¼ë¡œ ì¶”ê°€ íˆ¬ì ê²€í† </p>
                    <p class="mb-2">â€¢ <strong>ìˆ˜ìµ ìµœì í™”:</strong> ê³ ìˆ˜ìµ ìˆ™ì†Œ ëª¨ë¸ì„ ë‹¤ë¥¸ ìˆ™ì†Œì—ë„ ì ìš©</p>
                    <p>â€¢ <strong>ì¥ê¸° ì „ëµ:</strong> ì•ˆì •ì  ì„±ê³¼ ê¸°ë°˜ìœ¼ë¡œ 3-5ë…„ ì¥ê¸° íˆ¬ìê³„íš ìˆ˜ë¦½</p>
                `;
            } else if (averageMargin > 5) {
                outlook = `
                    <div class="performance-badge performance-good mb-3">
                        <i class="fas fa-thumbs-up mr-1"></i>
                        ì–‘í˜¸í•œ íˆ¬ì ì„±ê³¼
                    </div>
                    <p class="mb-2">â€¢ <strong>ì„±ê³¼ ê°œì„ :</strong> ë¹„ìš© ìµœì í™”ë¥¼ í†µí•œ ìˆ˜ìµë¥  í–¥ìƒ ê°€ëŠ¥</p>
                    <p class="mb-2">â€¢ <strong>ì‹œì¥ ë¶„ì„:</strong> ì„±ìˆ˜ê¸°/ë¹„ìˆ˜ê¸° íŒ¨í„´ ë¶„ì„ìœ¼ë¡œ ìˆ˜ìµ ê·¹ëŒ€í™”</p>
                    <p>â€¢ <strong>ì ì§„ì  í™•ì¥:</strong> í˜„ì¬ ìˆ˜ì¤€ ìœ ì§€ í›„ ë‹¨ê³„ì  íˆ¬ì í™•ëŒ€</p>
                `;
            } else {
                outlook = `
                    <div class="performance-badge performance-average mb-3">
                        <i class="fas fa-exclamation-triangle mr-1"></i>
                        ì „ëµ ê²€í†  í•„ìš”
                    </div>
                    <p class="mb-2">â€¢ <strong>ìš´ì˜ ìµœì í™”:</strong> ë¹„ìš© êµ¬ì¡° ì¬ê²€í†  ë° ìˆ˜ìµì„± ê°œì„  ë°©ì•ˆ ëª¨ìƒ‰</p>
                    <p class="mb-2">â€¢ <strong>ì‹œì¥ ì¬ë¶„ì„:</strong> ì§€ì—­ë³„/ìˆ™ì†Œë³„ ì„±ê³¼ ë¶„ì„ì„ í†µí•œ ì „ëµ ì¡°ì •</p>
                    <p>â€¢ <strong>ì „ë¬¸ê°€ ìƒë‹´:</strong> íˆ¬ì ì „ë¬¸ê°€ì™€ í¬íŠ¸í´ë¦¬ì˜¤ ì¬êµ¬ì„± ë…¼ì˜ ê¶Œì¥</p>
                `;
            }
            
            outlookDiv.innerHTML = outlook;
        }

        function calculateAverageMargin() {
            let totalMargin = 0;
            let validAccommodations = 0;
            
            settlementData.accommodations.forEach(accommodation => {
                const accTransactions = settlementData.transactions.filter(t => t.accommodationId === accommodation.id);
                
                let revenue = 0;
                let expenses = 0;
                
                accTransactions.forEach(transaction => {
                    if (transaction.type === 'income') {
                        revenue += parseFloat(transaction.amount || 0);
                    } else if (transaction.type === 'expense') {
                        expenses += parseFloat(transaction.amount || 0);
                    }
                });
                
                if (revenue > 0) {
                    const margin = ((revenue - expenses) / revenue) * 100;
                    totalMargin += margin;
                    validAccommodations++;
                }
            });
            
            return validAccommodations > 0 ? (totalMargin / validAccommodations).toFixed(1) : '0.0';
        }

        function getBestPerformingAccommodation() {
            let bestAccommodation = null;
            let bestProfit = -Infinity;
            
            settlementData.accommodations.forEach(accommodation => {
                const accTransactions = settlementData.transactions.filter(t => t.accommodationId === accommodation.id);
                
                let revenue = 0;
                let expenses = 0;
                
                accTransactions.forEach(transaction => {
                    if (transaction.type === 'income') {
                        revenue += parseFloat(transaction.amount || 0);
                    } else if (transaction.type === 'expense') {
                        expenses += parseFloat(transaction.amount || 0);
                    }
                });
                
                const profit = revenue - expenses;
                if (profit > bestProfit) {
                    bestProfit = profit;
                    bestAccommodation = accommodation;
                }
            });
            
            return bestAccommodation ? bestAccommodation.name : 'í•´ë‹¹ ì—†ìŒ';
        }

        function calculateInvestmentPerformance() {
            const transactions = settlementData.transactions;
            const initialInvestment = parseFloat(investorData.initialInvestment || 0);
            
            let totalRevenue = 0;
            let totalExpenses = 0;
            
            transactions.forEach(transaction => {
                if (transaction.type === 'income') {
                    totalRevenue += parseFloat(transaction.amount || 0);
                } else if (transaction.type === 'expense') {
                    totalExpenses += parseFloat(transaction.amount || 0);
                }
            });
            
            const netProfit = totalRevenue - totalExpenses;
            const investorShare = (investorData.ownershipPercentage || 100) / 100;
            const investorProfit = netProfit * investorShare;
            
            // ì›” ìˆ˜ìµë¥  ê³„ì‚°
            const monthlyReturn = initialInvestment > 0 ? (investorProfit / initialInvestment * 100) : 0;
            
            // ì—°í™˜ì‚° ìˆ˜ìµë¥  ê³„ì‚°
            const annualizedReturn = monthlyReturn * 12;
            
            // íˆ¬ìíšŒìˆ˜ ì˜ˆìƒê¸°ê°„ ê³„ì‚° (ì›”)
            const paybackPeriod = monthlyReturn > 0 ? Math.ceil(100 / monthlyReturn) : 0;
            
            // í‘œì‹œ
            document.getElementById('monthlyReturn').textContent = monthlyReturn.toFixed(1) + '%';
            document.getElementById('annualizedReturn').textContent = annualizedReturn.toFixed(1) + '%';
            document.getElementById('paybackPeriod').textContent = paybackPeriod + 'ê°œì›”';
        }

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function formatMoney(amount) {
            return new Intl.NumberFormat('ko-KR', {
                style: 'currency',
                currency: 'KRW',
                minimumFractionDigits: 0
            }).format(amount);
        }

        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('ko-KR');
        }
    </script>
</body>
</html>