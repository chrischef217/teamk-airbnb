<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í˜ì´í¬ ë°ì´í„° ì™„ì „ ì‚­ì œ</title>
    <script src="js/super-block-sw.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
</head>
<body class="bg-gray-50 min-h-screen p-4">
    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-sm p-6">
        <h1 class="text-2xl font-bold text-gray-800 mb-6">
            <i class="fas fa-trash-alt text-red-600 mr-3"></i>
            í˜ì´í¬ ë°ì´í„° ì™„ì „ ì‚­ì œ
        </h1>

        <div class="space-y-6">
            <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                <h2 class="text-lg font-semibold text-red-800 mb-2">âš ï¸ ì£¼ì˜ì‚¬í•­</h2>
                <p class="text-red-700">
                    ì´ ë„êµ¬ëŠ” localStorageì— ì €ì¥ëœ ëª¨ë“  í…ŒìŠ¤íŠ¸/í˜ì´í¬ ë°ì´í„°ë¥¼ ì™„ì „íˆ ì‚­ì œí•©ë‹ˆë‹¤.
                    ì‹¤ì œ ë°ì´í„°ê°€ ìˆë‹¤ë©´ ë°±ì—…ì„ ë¨¼ì € ë°›ìœ¼ì„¸ìš”.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <button onclick="showCurrentData()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg">
                    <i class="fas fa-eye mr-2"></i>
                    í˜„ì¬ ë°ì´í„° í™•ì¸
                </button>
                
                <button onclick="clearAllFakeData()" class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg">
                    <i class="fas fa-trash-alt mr-2"></i>
                    ëª¨ë“  í˜ì´í¬ ë°ì´í„° ì‚­ì œ
                </button>
            </div>

            <div id="output" class="bg-gray-50 rounded-lg p-4 min-h-32">
                <p class="text-gray-500">ì‘ì—… ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</p>
            </div>
        </div>
    </div>

    <script>
        function showCurrentData() {
            const output = document.getElementById('output');
            
            const investorData = localStorage.getItem('investorData');
            const accommodationData = localStorage.getItem('accommodationData');
            const accountingData = localStorage.getItem('accountingData');
            
            let result = '<h3 class="font-bold mb-2">í˜„ì¬ localStorage ë°ì´í„°:</h3>';
            
            if (investorData) {
                const investors = JSON.parse(investorData);
                result += `<p><strong>íˆ¬ìì ë°ì´í„°:</strong> ${investors.length}ê°œ</p>`;
                investors.forEach((inv, i) => {
                    result += `<p class="ml-4">- ${inv.name || inv.id} (${inv.accommodations?.length || 0}ê°œ ìˆ™ì†Œ)</p>`;
                });
            } else {
                result += '<p><strong>íˆ¬ìì ë°ì´í„°:</strong> ì—†ìŒ</p>';
            }
            
            if (accommodationData) {
                const accommodations = JSON.parse(accommodationData);
                result += `<p><strong>ìˆ™ì†Œ ë°ì´í„°:</strong> ${accommodations.length}ê°œ</p>`;
                accommodations.forEach((acc, i) => {
                    result += `<p class="ml-4">- ${acc.name || acc.accommodationName || acc.id}</p>`;
                });
            } else {
                result += '<p><strong>ìˆ™ì†Œ ë°ì´í„°:</strong> ì—†ìŒ</p>';
            }
            
            if (accountingData) {
                const accounting = JSON.parse(accountingData);
                result += `<p><strong>íšŒê³„ ë°ì´í„°:</strong> ${accounting.length}ê±´</p>`;
                const income = accounting.filter(item => item.type === 'income').length;
                const expense = accounting.filter(item => item.type === 'expense').length;
                result += `<p class="ml-4">- ìˆ˜ì…: ${income}ê±´, ì§€ì¶œ: ${expense}ê±´</p>`;
            } else {
                result += '<p><strong>íšŒê³„ ë°ì´í„°:</strong> ì—†ìŒ</p>';
            }
            
            output.innerHTML = result;
        }
        
        function clearAllFakeData() {
            if (!confirm('ì •ë§ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ? ì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                return;
            }
            
            const output = document.getElementById('output');
            
            try {
                // localStorageì—ì„œ ì£¼ìš” ë°ì´í„° í‚¤ ì‚­ì œ
                const keysToRemove = [
                    'investorData',
                    'accommodationData', 
                    'accountingData',
                    'reservationData',
                    'testData',
                    'fakeData'
                ];
                
                let result = '<h3 class="font-bold mb-2 text-green-600">âœ… ì‚­ì œ ì™„ë£Œ:</h3>';
                
                keysToRemove.forEach(key => {
                    if (localStorage.getItem(key)) {
                        localStorage.removeItem(key);
                        result += `<p class="text-green-600">- ${key} ì‚­ì œë¨</p>`;
                    } else {
                        result += `<p class="text-gray-500">- ${key} ì—†ì—ˆìŒ</p>`;
                    }
                });
                
                // í…ŒìŠ¤íŠ¸ìš© IDê°€ í¬í•¨ëœ ë°ì´í„°ë„ í™•ì¸
                const allKeys = Object.keys(localStorage);
                const testKeys = allKeys.filter(key => 
                    key.includes('test') || 
                    key.includes('fake') ||
                    key.includes('Test') ||
                    key.includes('Fake')
                );
                
                if (testKeys.length > 0) {
                    result += '<p class="mt-2 font-semibold">ì¶”ê°€ í…ŒìŠ¤íŠ¸ í‚¤ ë°œê²¬:</p>';
                    testKeys.forEach(key => {
                        localStorage.removeItem(key);
                        result += `<p class="text-orange-600">- ${key} ì‚­ì œë¨</p>`;
                    });
                }
                
                result += '<p class="mt-4 font-bold text-blue-600">ğŸ‰ ëª¨ë“  í˜ì´í¬ ë°ì´í„° ì‚­ì œ ì™„ë£Œ!</p>';
                result += '<p class="text-sm text-gray-600 mt-2">ì´ì œ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ í™•ì¸í•˜ì„¸ìš”.</p>';
                
                output.innerHTML = result;
                
                // 3ì´ˆ í›„ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì œì•ˆ
                setTimeout(() => {
                    if (confirm('í˜ì´í¬ ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤. ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                        window.location.href = 'index.html';
                    }
                }, 2000);
                
            } catch (error) {
                output.innerHTML = `<p class="text-red-600">âŒ ì‚­ì œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: ${error.message}</p>`;
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ í˜„ì¬ ë°ì´í„° í‘œì‹œ
        document.addEventListener('DOMContentLoaded', function() {
            showCurrentData();
        });
    </script>
</body>
</html>