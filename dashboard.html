<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teamk íƒœêµ­ ì—ì–´ë¹„ì•¤ë¹„ ìˆ™ë°•ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/translations.js"></script>
    <style>
        body { 
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
        }
        .kpi-card {
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }
        .tab-button {
            transition: all 0.2s ease-in-out;
        }
        .tab-button:hover {
            background-color: #f3f4f6;
        }
        .property-card {
            transition: box-shadow 0.2s ease-in-out;
        }
        .property-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-2 sm:px-4 py-4 sm:py-8">
        <!-- Header -->
        <div class="mb-6">
            <div class="bg-white rounded-lg shadow-sm p-4 mb-6">
                <h1 class="text-2xl font-bold text-gray-800 mb-2" data-translate="systemTitle">
                    Teamk íƒœêµ­ ì—ì–´ë¹„ì•¤ë¹„ ìˆ™ë°•ê´€ë¦¬ ì‹œìŠ¤í…œ
                </h1>

            </div>
            
            <!-- Tab Navigation -->
            <div class="bg-white rounded-lg shadow-sm mb-6">
                <div class="flex flex-wrap border-b">
                    <button class="px-4 py-3 text-sm font-medium text-white bg-blue-600 border-b-2 border-blue-600 rounded-tl-lg">
                        <i class="fas fa-tachometer-alt mr-1"></i> <span data-translate="dashboard">ëŒ€ì‹œë³´ë“œ</span>
                    </button>
                    <button onclick="window.location.href='accommodation.html'" class="px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-800">
                        <i class="fas fa-home mr-1"></i> <span data-translate="accommodations">ìˆ™ì†Œ ê´€ë¦¬</span>
                    </button>
                    <button onclick="window.location.href='reservation.html'" class="px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-800">
                        <i class="fas fa-calendar-check mr-1"></i> <span data-translate="reservations">ì˜ˆì•½ ê´€ë¦¬</span>
                    </button>
                    <button onclick="window.location.href='analytics.html'" class="px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-800">
                        <i class="fas fa-chart-bar mr-1"></i> <span data-translate="analytics">ì§€í‘œ ê´€ë¦¬</span>
                    </button>
                    <button onclick="window.location.href='accounting.html'" class="px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-800">
                        <i class="fas fa-coins mr-1"></i> <span data-translate="accounting">ìˆ˜ìµ ê´€ë¦¬</span>
                    </button>
                    <button onclick="window.location.href='investor.html'" class="px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-800">
                        <i class="fas fa-users mr-1"></i> <span data-translate="investors">íˆ¬ìì ê´€ë¦¬</span>
                    </button>
                    <button onclick="window.location.href='settlement.html'" class="px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-800">
                        <i class="fas fa-calculator mr-1"></i> <span data-translate="settlement">íˆ¬ìì ì •ì‚°</span>
                    </button>

                    <button onclick="window.location.href='backup.html'" class="px-4 py-3 text-sm font-medium text-gray-600 hover:text-gray-800">
                        <i class="fas fa-download mr-1"></i> <span data-translate="backup">ë°±ì—…</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Key Metrics Summary -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8">
            <!-- ì´ ìˆ˜ìµ ì¹´ë“œ -->
            <div class="bg-gradient-to-r from-pink-400 to-pink-500 rounded-lg p-6 text-white relative overflow-hidden">
                <div class="relative z-10">
                    <h3 class="text-sm font-medium opacity-90 mb-2">ì´ ìˆ˜ìµ</h3>
                    <p class="text-3xl font-bold mb-1">0 THB</p>
                </div>
                <div class="absolute top-4 right-4 text-4xl opacity-30">
                    <i class="fas fa-coins"></i>
                </div>
            </div>
            
            <!-- ì´ ì†ìµ ì¹´ë“œ -->
            <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-6 text-white relative overflow-hidden">
                <div class="relative z-10">
                    <h3 class="text-sm font-medium opacity-90 mb-2">ì´ ì†ìµ</h3>
                    <p class="text-3xl font-bold mb-1">0 THB</p>
                </div>
                <div class="absolute top-4 right-4 text-4xl opacity-30">
                    <i class="fas fa-chart-line-down"></i>
                </div>
            </div>
            
            <!-- í‰ê·  ROI ì¹´ë“œ -->
            <div class="bg-gradient-to-r from-green-400 to-green-500 rounded-lg p-6 text-white relative overflow-hidden">
                <div class="relative z-10">
                    <h3 class="text-sm font-medium opacity-90 mb-2">í‰ê·  ROI</h3>
                    <p class="text-3xl font-bold mb-1">0%</p>
                </div>
                <div class="absolute top-4 right-4 text-4xl opacity-30">
                    <i class="fas fa-percentage"></i>
                </div>
            </div>
        </div>



        <!-- ìƒì„¸ ë°ì´í„° í…Œì´ë¸” -->
        <div class="bg-white rounded-lg shadow-sm overflow-hidden mb-8">
            <div class="bg-gray-50 px-6 py-4 border-b">
                <h3 class="text-lg font-semibold text-gray-800">
                    ìƒì„¸ ìˆ™ì†Œë³„ ìˆ˜ìµ ë°ì´í„°
                </h3>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ìˆ™ì†Œëª…</th>
                            <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">íˆ¬ìê¸ˆ</th>
                            <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ëˆ„ì  ìˆ˜ìµê¸ˆ</th>
                            <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ëˆ„ì  ì§€ì¶œê¸ˆ</th>
                            <th class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">ëˆ„ì  ìˆœìˆ˜ìµ</th>
                            <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">ROI</th>
                        </tr>
                    </thead>
                    <tbody id="dataTable" class="bg-white divide-y divide-gray-200">
                        <!-- Table data will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œê·¸ì¸ í™•ì¸ (ê°•í™”ëœ ì²´í¬)
        function verifyLoginAndInit() {
            console.log('ğŸ” dashboard.html ë¡œê·¸ì¸ í™•ì¸ ì‹œì‘');
            
            let userType = sessionStorage.getItem('userType');
            let userName = sessionStorage.getItem('userName');
            let userId = sessionStorage.getItem('userId');
            
            console.log('ğŸ“‹ í˜„ì¬ ì„¸ì…˜ ìƒíƒœ:', { userType, userName, userId });
            
            // sessionStorageê°€ ë¹„ì–´ìˆìœ¼ë©´ localStorageì—ì„œ ë³µì› ì‹œë„
            if (!userType) {
                console.log('âš ï¸ ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ê°€ ë¹„ì–´ìˆìŒ, localStorageì—ì„œ ë³µì› ì‹œë„');
                userType = localStorage.getItem('userType');
                userName = localStorage.getItem('userName');
                userId = localStorage.getItem('userId');
                
                console.log('ğŸ“‹ localStorage ìƒíƒœ:', { userType, userName, userId });
                
                if (userType) {
                    // localStorageì—ì„œ sessionStorageë¡œ ë³µì›
                    sessionStorage.setItem('userType', userType);
                    sessionStorage.setItem('userName', userName);
                    sessionStorage.setItem('userId', userId);
                    console.log('âœ… localStorageì—ì„œ ì„¸ì…˜ ë³µì› ì™„ë£Œ');
                }
            }
            
            // ì—¬ì „íˆ ë¡œê·¸ì¸ ì •ë³´ê°€ ì—†ìœ¼ë©´ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ
            if (!userType || !userName || !userId) {
                console.log('âŒ ë¡œê·¸ì¸ ì •ë³´ ì—†ìŒ - index.htmlë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸');
                window.location.href = 'index.html';
                return;
            }
            
            console.log('âœ… ë¡œê·¸ì¸ í™•ì¸ë¨ - í˜ì´ì§€ ì´ˆê¸°í™” ì§„í–‰');
            
            if (checkLoginStatus()) { // ëª¨ë“  ì‚¬ìš©ì ì ‘ê·¼ í—ˆìš©
                initializePagePermissions(); // ê¶Œí•œë³„ í˜ì´ì§€ ì„¤ì •
                console.log('âœ… í˜ì´ì§€ ê¶Œí•œ ì´ˆê¸°í™” ì™„ë£Œ');
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', verifyLoginAndInit);
        
        // ì¶”ê°€ ì•ˆì „ì¥ì¹˜: í˜ì´ì§€ í¬ì»¤ìŠ¤ ì‹œì—ë„ ì„¸ì…˜ í™•ì¸
        window.addEventListener('focus', verifyLoginAndInit);

        // íƒœêµ­ ìˆ™ì†Œ ë°ì´í„° - ìƒ˜í”Œ ë°ì´í„° ì œê±°ë¨
        const tableData = [];

        // Populate table
        const tableBody = document.getElementById('dataTable');
        tableData.forEach(row => {
            const tr = document.createElement('tr');
            tr.className = 'hover:bg-gray-50';
            
            row.forEach((cell, index) => {
                const td = document.createElement('td');
                td.className = 'px-4 py-3 whitespace-nowrap text-sm';
                
                if (index === 0) {
                    // ìˆ™ì†Œëª…
                    td.className += ' font-medium text-gray-900';
                    td.textContent = cell;
                } else if (index >= 1 && index <= 4) {
                    // íˆ¬ìê¸ˆ, ëˆ„ì  ìˆ˜ìµê¸ˆ, ëˆ„ì  ì§€ì¶œê¸ˆ, ëˆ„ì  ìˆœìˆ˜ìµ
                    td.className += ' text-right text-gray-900 font-mono';
                    td.textContent = cell + ' THB';
                } else if (index === 5) {
                    // ROI
                    td.className += ' text-center font-semibold text-green-600';
                    td.textContent = cell;
                }
                
                tr.appendChild(td);
            });
            
            tableBody.appendChild(tr);
        });
    </script>
</body>
</html>